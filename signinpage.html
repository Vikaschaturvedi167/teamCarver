<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./CSS/signin.css" />

</head>
<body>
<h1 id="head">SIGN IN</h1>


    <!-- <div>
    <button id="logout" style="display: none;">signout</button>
    </div> -->

    <form action="">
        <div id="main">
        <div id="sign">
            <div>
                <h1>SIGN IN</h1>
            </div>
            <div>
                <label for="email"></label>
                <input type="text" name="login_email" id="login_email" placeholder="enter your email"/>

            </div>
            <div>
                <label for="password"></label>
                <input type="password" name="login_password" id="login_password" placeholder="enter your password">
            </div>
            <button type="button" id="login" name="login" class="btn btn-success">SIGN IN</button>

        </div>

<div id="reg">
<div>
    <h1>REGISTER
    </h1>

</div>

<div>
    <p>Create an account with us and you'll be able to:</p>
</div>
<div>
    <p>Check out faster</p>
</div>
<div>
    <p>Save multiple shipping addresses</p>
</div>
<div>
    <p>Access your order history</p>
</div>
<div>
    <p>Track new orders</p>
</div>
<div>
    <p>Track new orders</p>
</div>
<button type="button" id="register" name="register" class="btn-register">REGISTER</button>

</div>
        </div>

    </form>
</body>
</html>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    
    import { getAuth, signInWithEmailAndPassword,signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

    import { getDatabase, ref, onValue} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

    

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyA49sNT_Exqha6pivnVyAjGk-6Kh8DnYKo",
      authDomain: "authentication-543a6.firebaseapp.com",
      projectId: "authentication-543a6",
      storageBucket: "authentication-543a6.appspot.com",
      messagingSenderId: "742702348989",
      appId: "1:742702348989:web:01969e2a8215be1ee395d4"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

console.log(app);


const auth = getAuth();
const database = getDatabase();


document.getElementById("login").addEventListener("click",function(){
    let email = document.getElementById("login_email").value;
    let password = document.getElementById("login_password").value;


signInWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    const user_ref = ref(database,"users/"+ user.userId);
    onValue(user_ref,(snapshot)=>{
      const data = snapshot.val();
      console.log(data);
    })
    alert("login successfull");
   // console.log(user);
    // ...
    document.getElementById("logout").style.display="block";
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    console.log(errorMessage);
    alert(errorMessage);
  });

});



//signout btm
document.getElementById("logout").addEventListener("click",function(){


signOut(auth).then(() => {
  // Sign-out successful.
  alert("loged out");
  location.href ="./signup.html";
}).catch((error) => {
  // An error happened.
});
});
  </script>